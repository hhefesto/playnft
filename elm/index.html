<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>Elm â€¢ playNFT</title>
  <script type="text/javascript" src="Main.min.js"></script>
  <script src="web3.min.js"></script>
  <script src="abi.js"></script>
  <script type="module" src="index.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="playNFT"></div>
  <div id="other">
    <input type="button" onClick="app.ports.messageReceiver.send('someRandomString');"> Something <\input>
  </div>
</body>

<script type="text/javascript">
  window.addEventListener('load', (event) => {
      console.log('page is fully loaded');
      const web3 = new Web3(Web3.givenProvider);

      const contractAddress = "0xAC4FbD2f46eBfd6b68BFA5cfF93fe9BAFBB73ACa"; // process.env.CONTRACT_ADDRESS;
      // const apiHost = process.env.REACT_APP_API_HOST;
      const siteContract = new web3.eth.Contract(site, contractAddress);
  });

  var app = Elm.Main.init({
      node: document.getElementById('playNFT')
  });
  var socket = new WebSocket('ws://localhost:8082');

  // When a command goes to the `sendMessage` port, we pass the message
  // along to the WebSocket.
  app.ports.sendMessage.subscribe(function(message) {
      socket.send(message);
  });

  // When a message comes into our WebSocket, we pass the message along
  // to the `messageReceiver` port.
  socket.addEventListener("message", function(event) {
      app.ports.messageReceiver.send(event.data);
  });
  
  // socket.addEventListener("open", () => {
  //     socket.send("sent by elm html file")
  // });
</script>

</html>
